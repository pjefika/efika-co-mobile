<ion-header>
    <ion-navbar>
        <ion-title>Robo Manobra</ion-title>
        <ion-buttons end>
            <button ion-button icon-only (click)="areYouSureRefreshManobraInfo()">
                <ion-icon name="refresh"></ion-icon>
            </button>
        </ion-buttons>
    </ion-navbar>
</ion-header>

<ion-content padding>

    <div *ngIf="roboHolderIdsService.ableFormVerifyDispManobra">
        <ion-list>
            <ion-item>
                <ion-label>Tecnologia no Físico</ion-label>
                <ion-select [(ngModel)]="tipoTecnologia">
                    <ion-option value="FTTA">FTTA</ion-option>
                    <ion-option value="FTTH">FTTH</ion-option>
                </ion-select>
            </ion-item>

            <button ion-button block round (click)="doVerificarDisponibilidade()">Consultar Fibras Vagas</button>
            <br>

        </ion-list>

        <div *ngIf="tipoTecnologia==='FTTA'" class="stylethediv">
            <br>
            <ion-list class="putsomemargin">
                <ion-item>
                    <ion-label>Cabo</ion-label>
                    <ion-input type="number" [(ngModel)]="cabo" (change)="valueFieldsChangeValidation('cabo')">
                    </ion-input>
                </ion-item>
                <ion-item>
                    <ion-label>Primária</ion-label>
                    <ion-input type="number" [(ngModel)]="primaria" (change)="valueFieldsChangeValidation('primaria')"></ion-input>
                </ion-item>
                <ion-item>
                    <ion-label>Spliter Secundário</ion-label>
                    <ion-input type="number" [(ngModel)]="spliterSec" (change)="valueFieldsChangeValidation('spliter')"></ion-input>
                </ion-item>
            </ion-list>

            <button ion-button block round (click)="doVerificarDisponibilidadeForm();" color="secondary">Consultar
                manualmente as Facilidades</button>

        </div>

    </div>

    <div *ngIf="roboHolderIdsService.ableFormRoboManobra">
        <ion-list>
            <ion-item>
                <ion-label fixed>Motivo</ion-label>
                <ion-select [(ngModel)]="motivoManobra">
                    <ion-option value="Distância">Distância</ion-option>
                    <ion-option value="Bloco Incorreto">Bloco Incorreto</ion-option>
                    <ion-option value="Ocupação Indevida">Ocupação Indevida</ion-option>
                    <ion-option value="Travessia Irregular">Travessia Irregular</ion-option>
                    <ion-option value="Correção de cadastro">Correção de cadastro</ion-option>
                </ion-select>
            </ion-item>

            <ion-item>
                <ion-label fixed>Primária</ion-label>
                <ion-select [(ngModel)]="selectedPrimaria">
                    <ion-option *ngFor="let primaria of holderService.roboManobra.primaria" [value]="primaria">{{primaria.codprimaria}}</ion-option>
                </ion-select>
            </ion-item>

            <ion-item *ngIf="selectedPrimaria">
                <ion-label fixed>Equipamento</ion-label>
                <ion-select [(ngModel)]="selectedCTO">
                    <ion-option *ngFor="let cto of selectedPrimaria.CTO" [value]="cto">{{cto.codcto}}</ion-option>
                </ion-select>
            </ion-item>

            <ion-item *ngIf="selectedCTO">
                <ion-label fixed>Secundária</ion-label>
                <ion-select [(ngModel)]="selectecSecundaria">
                    <ion-option *ngFor="let secundaria of selectedCTO.secundaria" [value]="secundaria">{{secundaria.codsecundaria}}</ion-option>
                </ion-select>
            </ion-item>
            <button ion-button block round (click)="doManobrar()">Manobrar</button>
        </ion-list>
    </div>

    <div *ngIf="roboHolderIdsService.ableActionVerifySitManobra">
        <p>Aguarde o tempo de resposta pode demorar até 30 minutos, após a realização da manobra.</p>
        <button ion-button block round (click)="doVerifySituacaoManobra();">Verificar
            Situação</button>
    </div>

</ion-content>